# MG-Games Firebase Console ì…‹ì—… ê°€ì´ë“œ

> **ë¬¸ì„œ ë²„ì „**: 1.0.0
> **ìµœì¢… ìˆ˜ì •ì¼**: 2025-12-19
> **ëŒ€ìƒ**: 52ì¢… ê²Œì„ (MG-0001 ~ MG-0052)

---

## ğŸ“‹ ëª©ì°¨
1. [ì¸í”„ë¼ ì•„í‚¤í…ì²˜ ê°œìš”](#1-ì¸í”„ë¼-ì•„í‚¤í…ì²˜-ê°œìš”)
2. [Firebase í”„ë¡œì íŠ¸ êµ¬ì¡°](#2-firebase-í”„ë¡œì íŠ¸-êµ¬ì¡°)
3. [Firebase Console ì…‹ì—… ì ˆì°¨](#3-firebase-console-ì…‹ì—…-ì ˆì°¨)
4. [ì„œë¹„ìŠ¤ë³„ ì„¤ì •](#4-ì„œë¹„ìŠ¤ë³„-ì„¤ì •)
5. [í™˜ê²½ ë¶„ë¦¬ ì „ëµ](#5-í™˜ê²½-ë¶„ë¦¬-ì „ëµ)
6. [ë³´ì•ˆ ë° ê¶Œí•œ ì„¤ì •](#6-ë³´ì•ˆ-ë°-ê¶Œí•œ-ì„¤ì •)
7. [ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼](#7-ëª¨ë‹ˆí„°ë§-ë°-ì•Œë¦¼)
8. [ë¹„ìš© ìµœì í™”](#8-ë¹„ìš©-ìµœì í™”)

---

## 1. ì¸í”„ë¼ ì•„í‚¤í…ì²˜ ê°œìš”

### 1.1 ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MG-Games Infrastructure                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Vercel     â”‚  â”‚ GitHub Pages â”‚  â”‚      Firebase           â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚ íšŒì‚¬ í™ˆí˜ì´ì§€  â”‚  â”‚ ê²Œì„ë³„ ëœë”©   â”‚  â”‚ â€¢ Analytics             â”‚ â”‚
â”‚  â”‚ mg-games.com â”‚  â”‚ (52ê°œ í˜ì´ì§€) â”‚  â”‚ â€¢ Remote Config         â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ â€¢ Cloud Functions        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ Crashlytics           â”‚ â”‚
â”‚                                       â”‚ â€¢ BigQuery Export       â”‚ â”‚
â”‚                                       â”‚ â€¢ Cloud Messaging       â”‚ â”‚
â”‚                                       â”‚ â€¢ App Distribution      â”‚ â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚                â”‚
â”‚                                                   â–¼                â”‚
â”‚                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                       â”‚     Google Cloud         â”‚ â”‚
â”‚                                       â”‚                          â”‚ â”‚
â”‚                                       â”‚ â€¢ BigQuery (Analytics)   â”‚ â”‚
â”‚                                       â”‚ â€¢ Cloud Run (API)        â”‚ â”‚
â”‚                                       â”‚ â€¢ Cloud Storage          â”‚ â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ë„ë©”ì¸ êµ¬ì¡°
| ìš©ë„ | ë„ë©”ì¸ | í˜¸ìŠ¤íŒ… |
|------|--------|--------|
| íšŒì‚¬ í™ˆí˜ì´ì§€ | `mg-games.com` | Vercel |
| ê²Œì„ ëœë”©í˜ì´ì§€ | `mg-games.com/games/{game_id}` ë˜ëŠ” `{game_id}.mg-games.com` | GitHub Pages |
| API ì„œë²„ | `api.mg-games.com` | Cloud Run |
| CDN (ì—ì…‹) | `cdn.mg-games.com` | Cloud Storage + CDN |

---

## 2. Firebase í”„ë¡œì íŠ¸ êµ¬ì¡°

### 2.1 ë‹¨ì¼ í”„ë¡œì íŠ¸ êµ¬ì„± (ê¶Œì¥)
```
Firebase í”„ë¡œì íŠ¸: mg-games-prod
â”‚
â”œâ”€â”€ Apps (104ê°œ = 52ê²Œì„ Ã— 2í”Œë«í¼)
â”‚   â”œâ”€â”€ Android Apps
â”‚   â”‚   â”œâ”€â”€ com.mggames.game0001
â”‚   â”‚   â”œâ”€â”€ com.mggames.game0002
â”‚   â”‚   â””â”€â”€ ... (52ê°œ)
â”‚   â””â”€â”€ iOS Apps
â”‚       â”œâ”€â”€ com.mggames.game0001
â”‚       â”œâ”€â”€ com.mggames.game0002
â”‚       â””â”€â”€ ... (52ê°œ)
â”‚
â”œâ”€â”€ ê³µìœ  ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ Analytics (ê²Œì„ë³„ app_idë¡œ êµ¬ë¶„)
â”‚   â”œâ”€â”€ Remote Config (ì¡°ê±´ìœ¼ë¡œ ê²Œì„ë³„ ì„¤ì •)
â”‚   â”œâ”€â”€ Cloud Functions (ê³µí†µ API)
â”‚   â”œâ”€â”€ Crashlytics (ì•±ë³„ ìë™ ë¶„ë¦¬)
â”‚   â””â”€â”€ BigQuery Export (app_info.idë¡œ ì¿¼ë¦¬)
â”‚
â””â”€â”€ í™˜ê²½ë³„ í”„ë¡œì íŠ¸ (ì„ íƒ)
    â”œâ”€â”€ mg-games-staging
    â””â”€â”€ mg-games-dev
```

### 2.2 ë‹¨ì¼ í”„ë¡œì íŠ¸ ì¥ì 

| í•­ëª© | ì¥ì  |
|------|------|
| **ê´€ë¦¬** | í•˜ë‚˜ì˜ ì½˜ì†”ì—ì„œ 52ê°œ ê²Œì„ í†µí•© ê´€ë¦¬ |
| **ë¹„ìš©** | Blaze í”Œëœ 1ê°œë§Œ í•„ìš”, ë¬´ë£Œ í• ë‹¹ëŸ‰ ê³µìœ  |
| **ë¶„ì„** | í¬ë¡œìŠ¤ ê²Œì„ ë¶„ì„ ìš©ì´ (BigQuery ë‹¨ì¼ ë°ì´í„°ì…‹) |
| **ë°°í¬** | Cloud Functions í•œ ë²ˆ ë°°í¬ë¡œ ì „ì²´ ì ìš© |
| **ì„¤ì •** | Remote Config ì¡°ê±´ìœ¼ë¡œ ê²Œì„ë³„ ë¶„ê¸° |

### 2.3 ê²Œì„ êµ¬ë¶„ ë°©ë²•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   mg-games-prod í”„ë¡œì íŠ¸                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Analytics         â†’ app_info.id ë¡œ ê²Œì„ êµ¬ë¶„               â”‚
â”‚  Remote Config     â†’ app.id ì¡°ê±´ìœ¼ë¡œ ê²Œì„ë³„ ê°’ ì„¤ì •          â”‚
â”‚  Crashlytics       â†’ ì•±ë³„ ìë™ ë¶„ë¦¬ (ë³„ë„ ì„¤ì • ë¶ˆí•„ìš”)        â”‚
â”‚  Cloud Functions   â†’ request.app_id ë¡œ ê²Œì„ ì‹ë³„            â”‚
â”‚  BigQuery          â†’ app_info.id ì»¬ëŸ¼ìœ¼ë¡œ í•„í„°ë§            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Firebase Console ì…‹ì—… ì ˆì°¨

### 3.1 í”„ë¡œì íŠ¸ ìƒì„±

#### Step 1: Firebase Console ì ‘ì†
```
https://console.firebase.google.com/
```

#### Step 2: í”„ë¡œì íŠ¸ ìƒì„±
1. "í”„ë¡œì íŠ¸ ì¶”ê°€" í´ë¦­
2. í”„ë¡œì íŠ¸ ì´ë¦„: `mg-games-prod`
3. Google Analytics í™œì„±í™”: **ì˜ˆ**
4. Analytics ê³„ì •: ìƒˆë¡œ ìƒì„± ë˜ëŠ” ê¸°ì¡´ ê³„ì • ì„ íƒ
5. ìœ„ì¹˜: `asia-northeast3` (ì„œìš¸) ë˜ëŠ” `us-central1`

#### Step 3: Blaze í”Œëœ ì—…ê·¸ë ˆì´ë“œ
```
í”„ë¡œì íŠ¸ ì„¤ì • > ì‚¬ìš©ëŸ‰ ë° ê²°ì œ > Blaze í”Œëœìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
```
**í•„ìˆ˜**: Cloud Functions, BigQuery Export ì‚¬ìš©ì„ ìœ„í•´ í•„ìš”

### 3.2 52ê°œ ê²Œì„ ì•± ë“±ë¡

#### CLIë¡œ ì¼ê´„ ë“±ë¡ (ê¶Œì¥)
```bash
#!/bin/bash
# 52ê°œ ê²Œì„ Android/iOS ì•± ì¼ê´„ ë“±ë¡

PROJECT_ID="mg-games-prod"

for i in $(seq -f "%04g" 1 52); do
  echo "Registering MG-$i..."

  # Android ì•±
  firebase apps:create android \
    --project "$PROJECT_ID" \
    --package-name "com.mggames.game$i" \
    --display-name "MG-$i Android"

  # iOS ì•±
  firebase apps:create ios \
    --project "$PROJECT_ID" \
    --bundle-id "com.mggames.game$i" \
    --display-name "MG-$i iOS"
done

echo "âœ… 104ê°œ ì•± ë“±ë¡ ì™„ë£Œ (52 Android + 52 iOS)"
```

#### ì„¤ì • íŒŒì¼ ì¼ê´„ ë‹¤ìš´ë¡œë“œ
```bash
#!/bin/bash
# google-services.json / GoogleService-Info.plist ë‹¤ìš´ë¡œë“œ

PROJECT_ID="mg-games-prod"
REPOS_DIR="d:/mg-games/repos"

# ì•± ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
apps=$(firebase apps:list --project "$PROJECT_ID" --json)

for i in $(seq -f "%04g" 1 52); do
  game_dir="$REPOS_DIR/mg-game-$i/game"

  # Android ì„¤ì •
  app_id=$(echo "$apps" | jq -r ".result[] | select(.displayName==\"MG-$i Android\") | .appId")
  if [ -n "$app_id" ]; then
    mkdir -p "$game_dir/android/app"
    firebase apps:sdkconfig android "$app_id" \
      --project "$PROJECT_ID" \
      --out "$game_dir/android/app/google-services.json"
  fi

  # iOS ì„¤ì •
  app_id=$(echo "$apps" | jq -r ".result[] | select(.displayName==\"MG-$i iOS\") | .appId")
  if [ -n "$app_id" ]; then
    mkdir -p "$game_dir/ios/Runner"
    firebase apps:sdkconfig ios "$app_id" \
      --project "$PROJECT_ID" \
      --out "$game_dir/ios/Runner/GoogleService-Info.plist"
  fi

  echo "âœ“ MG-$i configs downloaded"
done
```

#### Consoleì—ì„œ ìˆ˜ë™ ë“±ë¡ (í•„ìš” ì‹œ)
```
1. í”„ë¡œì íŠ¸ ê°œìš” > ì•± ì¶”ê°€ > Android/iOS ì„ íƒ
2. íŒ¨í‚¤ì§€/ë²ˆë“¤ ID: com.mggames.game0001
3. ì•± ë‹‰ë„¤ì„: MG-0001 Android (ë˜ëŠ” iOS)
4. ì„¤ì • íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```

### 3.3 ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
repos/mg-game-0001/
â”œâ”€â”€ game/
â”‚   â”œâ”€â”€ android/
â”‚   â”‚   â””â”€â”€ app/
â”‚   â”‚       â””â”€â”€ google-services.json
â”‚   â””â”€â”€ ios/
â”‚       â””â”€â”€ Runner/
â”‚           â””â”€â”€ GoogleService-Info.plist
â””â”€â”€ firebase/
    â”œâ”€â”€ firebase.json
    â””â”€â”€ .firebaserc
```

---

## 4. ì„œë¹„ìŠ¤ë³„ ì„¤ì •

### 4.1 Firebase Analytics

#### ì„¤ì • ìœ„ì¹˜
```
Firebase Console > Analytics > ì„¤ì •
```

#### í•„ìˆ˜ ì„¤ì •
1. **ë°ì´í„° ë³´ê´€ ê¸°ê°„**: 14ê°œì›” (ìµœëŒ€)
2. **Google ì‹ í˜¸ ë°ì´í„°**: í™œì„±í™”
3. **BigQuery ì—°ê²°**: í™œì„±í™”

#### ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ë“±ë¡
```
Analytics > ì´ë²¤íŠ¸ > ì´ë²¤íŠ¸ ë§Œë“¤ê¸°
```

**í•„ìˆ˜ ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸**:
| ì´ë²¤íŠ¸ | ì„¤ëª… | ë§¤ê°œë³€ìˆ˜ |
|--------|------|----------|
| `level_complete` | ë ˆë²¨ ì™„ë£Œ | level, score, stars |
| `currency_earned` | ì¬í™” íšë“ | currency_type, amount, source |
| `currency_spent` | ì¬í™” ì†Œë¹„ | currency_type, amount, item |
| `ad_reward_claimed` | ê´‘ê³  ë³´ìƒ | placement, reward_type |
| `gacha_pull` | ê°€ì±  (Level A) | banner_id, pull_count, pity |

#### ì‚¬ìš©ì ì†ì„± ë“±ë¡
```
Analytics > ì‚¬ìš©ì > ì‚¬ìš©ì ì •ì˜ ì •ì˜
```

| ì†ì„± | ì„¤ëª… |
|------|------|
| `game_id` | ê²Œì„ ì‹ë³„ì (game_0001) |
| `user_level` | ìœ ì € ë ˆë²¨ |
| `total_spend_usd` | ì´ ê²°ì œ ê¸ˆì•¡ |
| `is_payer` | ê²°ì œ ìœ ì € ì—¬ë¶€ |
| `ab_test_group` | A/B í…ŒìŠ¤íŠ¸ ê·¸ë£¹ |

### 4.2 Remote Config

#### ì„¤ì • ìœ„ì¹˜
```
Firebase Console > Remote Config
```

#### ì´ˆê¸° íŒŒë¼ë¯¸í„° ì„¤ì •
```json
{
  "daily_reward_coins": 100,
  "energy_max": 5,
  "energy_regen_minutes": 20,
  "interstitial_cooldown_sec": 180,
  "rewarded_daily_limit": 10,
  "maintenance_mode": false,
  "current_event_id": "",
  "ab_test_enabled": false
}
```

#### ê²Œì„ ê·¸ë£¹ë³„ ì¡°ê±´ ì„¤ì • (ë‹¨ì¼ í”„ë¡œì íŠ¸ì—ì„œ 52ê°œ ê²Œì„ êµ¬ë¶„)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Remote Config ì¡°ê±´ìœ¼ë¡œ 52ê°œ ê²Œì„ ì„¤ì • ë¶„ê¸°                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì¡°ê±´ëª…: Level_A_Games                                       â”‚
â”‚  ì¡°ê±´: app.id.matches('com\\.mggames\\.game00(2[5-9]|3[0-6])')â”‚
â”‚  â†’ MG-0025 ~ MG-0036 (Level A JRPG 12ì¢…)                    â”‚
â”‚                                                             â”‚
â”‚  ì¡°ê±´ëª…: Region_India                                        â”‚
â”‚  ì¡°ê±´: app.id.matches('com\\.mggames\\.game00(3[7-9]|40)')   â”‚
â”‚  â†’ MG-0037 ~ MG-0040 (ì¸ë„ 4ì¢…)                             â”‚
â”‚                                                             â”‚
â”‚  ì¡°ê±´ëª…: Region_LATAM                                        â”‚
â”‚  ì¡°ê±´: app.id.matches('com\\.mggames\\.game004[1-4]')        â”‚
â”‚  â†’ MG-0041 ~ MG-0044 (ë‚¨ë¯¸ 4ì¢…)                             â”‚
â”‚                                                             â”‚
â”‚  ì¡°ê±´ëª…: Region_SEA                                          â”‚
â”‚  ì¡°ê±´: app.id.matches('com\\.mggames\\.game004[5-8]')        â”‚
â”‚  â†’ MG-0045 ~ MG-0048 (ë™ë‚¨ì•„ 4ì¢…)                           â”‚
â”‚                                                             â”‚
â”‚  ì¡°ê±´ëª…: Region_Africa                                       â”‚
â”‚  ì¡°ê±´: app.id.matches('com\\.mggames\\.game00(49|5[0-2])')   â”‚
â”‚  â†’ MG-0049 ~ MG-0052 (ì•„í”„ë¦¬ì¹´ 4ì¢…)                         â”‚
â”‚                                                             â”‚
â”‚  ê¸°ë³¸ê°’: MG-0001 ~ MG-0024 (Year 1-2 ìºì£¼ì–¼ 24ì¢…)            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¡°ê±´ë³„ íŒŒë¼ë¯¸í„° ê°’**:
| íŒŒë¼ë¯¸í„° | ê¸°ë³¸ê°’ | Level_A | Emerging Markets |
|----------|--------|---------|------------------|
| energy_max | 5 | 120 | 5 |
| energy_regen_minutes | 20 | 5 | 15 |
| starter_pack_price_usd | 1.99 | 4.99 | 0.99 |
| gacha_pity_threshold | 0 | 90 | 0 |
| interstitial_cooldown_sec | 180 | 300 | 120 |

#### CLIë¡œ Remote Config ë°°í¬
```bash
# ì„¤ì • ë°°í¬
firebase remoteconfig:publish remote_config.json --project mg-games-prod

# í˜„ì¬ ì„¤ì • ë°±ì—…
firebase remoteconfig:get --project mg-games-prod -o backup.json

# ë²„ì „ íˆìŠ¤í† ë¦¬
firebase remoteconfig:versions:list --project mg-games-prod
```

### 4.3 Cloud Functions

#### í•„ìˆ˜ í•¨ìˆ˜
```
functions/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ iap/
â”‚   â”‚   â””â”€â”€ verifyReceipt.ts      # ì˜ìˆ˜ì¦ ê²€ì¦
â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â””â”€â”€ dailyReport.ts        # ì¼ì¼ ë¦¬í¬íŠ¸
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â””â”€â”€ eventScheduler.ts     # ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬
â”‚   â””â”€â”€ admin/
â”‚       â””â”€â”€ configUpdate.ts       # ì„¤ì • ì—…ë°ì´íŠ¸
â””â”€â”€ package.json
```

#### ë°°í¬
```bash
firebase deploy --only functions
```

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
firebase functions:config:set \
  slack.webhook_url="https://hooks.slack.com/..." \
  admin.api_key="secret-key"
```

### 4.4 Crashlytics

#### ì„¤ì • ìœ„ì¹˜
```
Firebase Console > Crashlytics
```

#### Flutter í†µí•©
```yaml
# pubspec.yaml
dependencies:
  firebase_crashlytics: ^3.4.0

# main.dart
await FirebaseCrashlytics.instance.setCrashlyticsCollectionEnabled(true);
FlutterError.onError = FirebaseCrashlytics.instance.recordFlutterError;
```

#### ì»¤ìŠ¤í…€ í‚¤ ì„¤ì •
```dart
FirebaseCrashlytics.instance.setCustomKey('game_id', 'game_0001');
FirebaseCrashlytics.instance.setCustomKey('user_level', userLevel);
FirebaseCrashlytics.instance.setCustomKey('device_tier', deviceTier);
```

### 4.5 BigQuery Export

#### ì„¤ì • ìœ„ì¹˜
```
Firebase Console > í”„ë¡œì íŠ¸ ì„¤ì • > í†µí•© > BigQuery
```

#### í™œì„±í™” ì ˆì°¨
1. BigQuery ì—°ê²° í™œì„±í™”
2. ë°ì´í„° ì„¸íŠ¸ ìœ„ì¹˜: `asia-northeast3` (ì„œìš¸)
3. ë‚´ë³´ë‚´ê¸° ìœ í˜•: **ìŠ¤íŠ¸ë¦¬ë°** (ì‹¤ì‹œê°„)

#### ìƒì„±ë˜ëŠ” í…Œì´ë¸”
```sql
-- Analytics ì´ë²¤íŠ¸ í…Œì´ë¸”
analytics_<property_id>.events_*

-- ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ
SELECT
  event_name,
  event_timestamp,
  user_pseudo_id,
  device.category,
  geo.country,
  app_info.id as game_id,
  -- ì´ë²¤íŠ¸ íŒŒë¼ë¯¸í„°
  (SELECT value.int_value FROM UNNEST(event_params) WHERE key = 'level') as level,
  (SELECT value.int_value FROM UNNEST(event_params) WHERE key = 'score') as score
FROM `mg-games-prod.analytics_*.events_*`
WHERE event_name = 'level_complete'
```

### 4.6 Cloud Messaging (FCM)

#### ì„¤ì • ìœ„ì¹˜
```
Firebase Console > Cloud Messaging
```

#### ì„œë²„ í‚¤ íšë“
```
í”„ë¡œì íŠ¸ ì„¤ì • > í´ë¼ìš°ë“œ ë©”ì‹œì§• > ì„œë²„ í‚¤
```

#### í† í”½ êµ¬ì¡°
```
/topics/game_0001               # ê²Œì„ë³„ ì „ì²´
/topics/game_0001_event         # ê²Œì„ë³„ ì´ë²¤íŠ¸
/topics/all_games               # ì „ì²´ ê²Œì„
/topics/level_a_games           # Level A ê²Œì„
/topics/casual_games            # ìºì£¼ì–¼ ê²Œì„
/topics/region_india            # ì§€ì—­ë³„
/topics/region_latam
/topics/region_sea
/topics/region_africa
```

### 4.7 App Distribution (í…ŒìŠ¤íŠ¸ ë°°í¬)

#### ì„¤ì • ìœ„ì¹˜
```
Firebase Console > App Distribution
```

#### í…ŒìŠ¤í„° ê·¸ë£¹
| ê·¸ë£¹ | ì„¤ëª… |
|------|------|
| `internal` | ë‚´ë¶€ í…ŒìŠ¤í„° |
| `qa` | QA íŒ€ |
| `beta` | ë² íƒ€ í…ŒìŠ¤í„° |
| `regional_india` | ì¸ë„ í…ŒìŠ¤í„° |
| `regional_latam` | ë‚¨ë¯¸ í…ŒìŠ¤í„° |

#### CI/CD í†µí•©
```yaml
# .github/workflows/deploy-test.yml
- name: Upload to Firebase App Distribution
  uses: wzieba/Firebase-Distribution-Github-Action@v1
  with:
    appId: ${{ secrets.FIREBASE_APP_ID }}
    token: ${{ secrets.FIREBASE_TOKEN }}
    groups: qa
    file: build/app/outputs/flutter-apk/app-release.apk
```

---

## 5. í™˜ê²½ ë¶„ë¦¬ ì „ëµ

### 5.1 í™˜ê²½ë³„ í”„ë¡œì íŠ¸
| í™˜ê²½ | í”„ë¡œì íŠ¸ ID | ìš©ë„ |
|------|------------|------|
| Production | `mg-games-prod` | ì‹¤ì„œë¹„ìŠ¤ |
| Staging | `mg-games-staging` | ì¶œì‹œ ì „ í…ŒìŠ¤íŠ¸ |
| Development | `mg-games-dev` | ê°œë°œ |

### 5.2 Flutter í™˜ê²½ ì„¤ì •

#### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
game/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ env_config.dart
â”‚   â”‚   â””â”€â”€ firebase_options_*.dart
â”‚   â””â”€â”€ main_*.dart
â”œâ”€â”€ android/
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ google-services.json          # prod
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ dev/google-services.json
â”‚       â”‚   â””â”€â”€ staging/google-services.json
â””â”€â”€ ios/
    â””â”€â”€ Runner/
        â”œâ”€â”€ GoogleService-Info.plist      # prod
        â””â”€â”€ Firebase/
            â”œâ”€â”€ dev/GoogleService-Info.plist
            â””â”€â”€ staging/GoogleService-Info.plist
```

#### ë¹Œë“œ ëª…ë ¹
```bash
# Development
flutter run --dart-define=ENVIRONMENT=dev

# Staging
flutter run --dart-define=ENVIRONMENT=staging

# Production
flutter build apk --dart-define=ENVIRONMENT=prod
```

### 5.3 í™˜ê²½ë³„ Firebase ì´ˆê¸°í™”
```dart
// lib/config/firebase_init.dart
Future<void> initializeFirebase() async {
  final env = const String.fromEnvironment('ENVIRONMENT', defaultValue: 'prod');

  FirebaseOptions options;
  switch (env) {
    case 'dev':
      options = FirebaseOptionsDev.currentPlatform;
      break;
    case 'staging':
      options = FirebaseOptionsStaging.currentPlatform;
      break;
    default:
      options = FirebaseOptionsProd.currentPlatform;
  }

  await Firebase.initializeApp(options: options);
}
```

---

## 6. ë³´ì•ˆ ë° ê¶Œí•œ ì„¤ì •

### 6.1 IAM ê¶Œí•œ êµ¬ì¡°

#### ì—­í•  ì •ì˜
| ì—­í•  | ê¶Œí•œ | ëŒ€ìƒ |
|------|------|------|
| `Owner` | ëª¨ë“  ê¶Œí•œ | í”„ë¡œì íŠ¸ ê´€ë¦¬ì |
| `Editor` | ëŒ€ë¶€ë¶„ ìˆ˜ì • | ê°œë°œíŒ€ ë¦¬ë“œ |
| `Viewer` | ì½ê¸° ì „ìš© | ë¶„ì„íŒ€ |
| `Firebase Admin` | Firebase ì„œë¹„ìŠ¤ | ë°±ì—”ë“œ ê°œë°œì |
| `Analytics Viewer` | Analytics ì½ê¸° | ë§ˆì¼€íŒ…íŒ€ |

#### ì„œë¹„ìŠ¤ ê³„ì •
```
Firebase Console > í”„ë¡œì íŠ¸ ì„¤ì • > ì„œë¹„ìŠ¤ ê³„ì •
```

| ê³„ì • | ìš©ë„ | íŒŒì¼ëª… |
|------|------|--------|
| `firebase-adminsdk` | ë°±ì—”ë“œ API | `service-account-prod.json` |
| `github-actions` | CI/CD | `ci-service-account.json` |
| `bigquery-export` | BigQuery ì ‘ê·¼ | (ìë™ ìƒì„±) |

### 6.2 API í‚¤ ì œí•œ

#### Android í‚¤ ì œí•œ
```
Google Cloud Console > API ë° ì„œë¹„ìŠ¤ > ì‚¬ìš©ì ì¸ì¦ ì •ë³´
> Android í‚¤ ì„ íƒ > ì• í”Œë¦¬ì¼€ì´ì…˜ ì œí•œì‚¬í•­

- Android ì•±ìœ¼ë¡œ ì œí•œ
- íŒ¨í‚¤ì§€ ì´ë¦„: com.mggames.game* (ì™€ì¼ë“œì¹´ë“œ ë¶ˆê°€, ê°œë³„ ë“±ë¡)
- SHA-1 ì¸ì¦ì„œ ì§€ë¬¸ ì¶”ê°€
```

#### iOS í‚¤ ì œí•œ
```
- iOS ì•±ìœ¼ë¡œ ì œí•œ
- ë²ˆë“¤ ID: com.mggames.game*
```

### 6.3 ë³´ì•ˆ ê·œì¹™ (Firestore - Level Aìš©)
```javascript
// firestore.rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ì‚¬ìš©ì ë°ì´í„°
    match /users/{userId} {
      allow read, write: if request.auth.uid == userId;
    }

    // ê¸¸ë“œ ë°ì´í„° (Level A)
    match /guilds/{guildId} {
      allow read: if request.auth != null;
      allow write: if isGuildMember(guildId);
    }

    // ë­í‚¹ (ì½ê¸° ì „ìš©)
    match /rankings/{gameId}/{document=**} {
      allow read: if true;
      allow write: if false; // Cloud Functionsë§Œ ê°€ëŠ¥
    }

    function isGuildMember(guildId) {
      return exists(/databases/$(database)/documents/guilds/$(guildId)/members/$(request.auth.uid));
    }
  }
}
```

---

## 7. ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

### 7.1 ì•Œë¦¼ ì„¤ì •

#### Crashlytics ì•Œë¦¼
```
Crashlytics > ì„¤ì • > ì•Œë¦¼

- ìƒˆë¡œìš´ ë¹„ì •ìƒ ì¢…ë£Œ ë¬¸ì œ: Slack ì•Œë¦¼
- íšŒê·€ ë¬¸ì œ: ì´ë©”ì¼ + Slack
- ì†ë„ ì•Œë¦¼ (ë¹„ì •ìƒ ì¢…ë£Œìœ¨ > 1%): ì¦‰ì‹œ ì•Œë¦¼
```

#### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì•Œë¦¼
```
Performance > ì„¤ì • > ì•Œë¦¼

- ì•± ì‹œì‘ ì‹œê°„ > 5ì´ˆ
- HTTP ìš”ì²­ ì„±ê³µë¥  < 95%
- ì‚¬ìš©ì ì§€ì • ì¶”ì  ì„ê³„ê°’
```

### 7.2 Slack í†µí•©

#### Webhook ì„¤ì •
```javascript
// functions/src/notifications/slack.ts
const SLACK_WEBHOOK = functions.config().slack.webhook_url;

export async function sendSlackAlert(message: string, channel: string) {
  await fetch(SLACK_WEBHOOK, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      channel,
      text: message,
      username: 'MG-Games Bot',
      icon_emoji: ':video_game:'
    })
  });
}
```

#### ì±„ë„ êµ¬ì¡°
| ì±„ë„ | ì•Œë¦¼ ìœ í˜• |
|------|----------|
| `#mg-alerts-critical` | í¬ë˜ì‹œ, ì„œë²„ ì¥ì•  |
| `#mg-alerts-revenue` | ë§¤ì¶œ ì´ìƒ |
| `#mg-alerts-qa` | QA ê²°ê³¼ |
| `#mg-daily-report` | ì¼ì¼ ë¦¬í¬íŠ¸ |

### 7.3 ëŒ€ì‹œë³´ë“œ

#### Firebase Console ëŒ€ì‹œë³´ë“œ
- í”„ë¡œì íŠ¸ ê°œìš”: ì „ì²´ í˜„í™©
- Analytics Dashboard: ìœ ì € í–‰ë™
- Crashlytics: ì•ˆì •ì„±

#### ì™¸ë¶€ ëŒ€ì‹œë³´ë“œ (Looker Studio)
```
BigQuery ë°ì´í„° ê¸°ë°˜ ëŒ€ì‹œë³´ë“œ
- ê²Œì„ë³„ DAU/MAU
- ë§¤ì¶œ í˜„í™©
- ì½”í˜¸íŠ¸ ë¦¬í…ì…˜
- ê´‘ê³  ìˆ˜ìµ
```

---

## 8. ë¹„ìš© ìµœì í™”

### 8.1 ì˜ˆìƒ ë¹„ìš© (52ê°œ ê²Œì„ ê¸°ì¤€)

| ì„œë¹„ìŠ¤ | ë¬´ë£Œ í•œë„ | ì˜ˆìƒ ì›” ë¹„ìš© |
|--------|----------|-------------|
| Analytics | ë¬´ë£Œ | $0 |
| Remote Config | ë¬´ë£Œ | $0 |
| Crashlytics | ë¬´ë£Œ | $0 |
| Cloud Functions | 200ë§Œ í˜¸ì¶œ/ì›” | $50~200 |
| BigQuery | 10GB ì²˜ë¦¬/ì›” | $50~300 |
| Cloud Storage | 5GB | $10~50 |
| Cloud Messaging | ë¬´ë£Œ | $0 |

**ì˜ˆìƒ ì´ ë¹„ìš©**: $150~600/ì›” (íŠ¸ë˜í”½ì— ë”°ë¼ ë³€ë™)

### 8.2 ë¹„ìš© ì ˆê° ì „ëµ

#### BigQuery ìµœì í™”
```sql
-- íŒŒí‹°ì…˜ í…Œì´ë¸” ì‚¬ìš©
CREATE TABLE analytics.events_daily
PARTITION BY DATE(event_timestamp)
AS SELECT * FROM ...

-- í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì„ íƒ
SELECT event_name, user_id, event_params
FROM ... -- * ëŒ€ì‹  íŠ¹ì • ì»¬ëŸ¼
```

#### Cloud Functions ìµœì í™”
```javascript
// ì½œë“œ ìŠ¤íƒ€íŠ¸ ìµœì†Œí™”
exports.api = functions
  .runWith({ minInstances: 1 })
  .https.onRequest(app);

// ë©”ëª¨ë¦¬ ìµœì í™”
exports.lightFunction = functions
  .runWith({ memory: '128MB' })
  .pubsub.topic('...')
```

#### ì˜ˆì‚° ì•Œë¦¼ ì„¤ì •
```
Google Cloud Console > ê²°ì œ > ì˜ˆì‚° ë° ì•Œë¦¼

- ì›” ì˜ˆì‚°: $500
- ì•Œë¦¼ ì„ê³„ê°’: 50%, 80%, 100%
- ì´ë©”ì¼ + Slack ì•Œë¦¼
```

---

## 9. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì´ˆê¸° ì…‹ì—…
- [ ] Firebase í”„ë¡œì íŠ¸ ìƒì„± (prod/staging/dev)
- [ ] Blaze í”Œëœ ì—…ê·¸ë ˆì´ë“œ
- [ ] 52ê°œ Android ì•± ë“±ë¡
- [ ] 52ê°œ iOS ì•± ë“±ë¡
- [ ] Analytics í™œì„±í™”
- [ ] BigQuery ì—°ë™
- [ ] Remote Config ì´ˆê¸°ê°’ ì„¤ì •

### ì„œë¹„ìŠ¤ ì„¤ì •
- [ ] Crashlytics í†µí•©
- [ ] Cloud Functions ë°°í¬
- [ ] Cloud Messaging ì„¤ì •
- [ ] App Distribution í…ŒìŠ¤í„° ê·¸ë£¹

### ë³´ì•ˆ
- [ ] IAM ì—­í•  ì„¤ì •
- [ ] ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±
- [ ] API í‚¤ ì œí•œ
- [ ] ë³´ì•ˆ ê·œì¹™ ë°°í¬

### ëª¨ë‹ˆí„°ë§
- [ ] Slack ì›¹í›… ì„¤ì •
- [ ] ì•Œë¦¼ ê·œì¹™ êµ¬ì„±
- [ ] ì˜ˆì‚° ì•Œë¦¼ ì„¤ì •
- [ ] Looker Studio ëŒ€ì‹œë³´ë“œ

---

## ë¶€ë¡: ìœ ìš©í•œ ëª…ë ¹ì–´

### Firebase CLI
```bash
# ë¡œê·¸ì¸
firebase login

# í”„ë¡œì íŠ¸ ëª©ë¡
firebase projects:list

# ì•± ëª©ë¡
firebase apps:list --project mg-games-prod

# Remote Config ê°€ì ¸ì˜¤ê¸°
firebase remoteconfig:get --project mg-games-prod

# Functions ë¡œê·¸
firebase functions:log --project mg-games-prod
```

### gcloud CLI
```bash
# BigQuery ì¿¼ë¦¬
bq query --use_legacy_sql=false \
  'SELECT * FROM `mg-games-prod.analytics_*.events_*` LIMIT 10'

# ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ìƒì„±
gcloud iam service-accounts keys create key.json \
  --iam-account=firebase-adminsdk@mg-games-prod.iam.gserviceaccount.com
```

---

*ë¬¸ì„œ ì‘ì„±: 2025-12-19*
*MG-Games ì¸í”„ë¼íŒ€*
